FROM apache/airflow:2.7.1

USER root

RUN apt-get update && apt-get install -y \
    gcc \
    python3-dev \
    && apt-get clean

USER airflow

RUN pip install --no-cache-dir \
    requests==2.31.0 \
    psycopg2-binary==2.9.7 \
    pandas==2.0.3 \
    python-dotenv==1.0.0

WORKDIR /opt/airflow